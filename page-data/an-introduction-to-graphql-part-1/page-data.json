{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/an-introduction-to-graphql-part-1/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Brainstormer"}},"markdownRemark":{"id":"08714305-11be-5d9f-a15b-53db3a55bdd2","excerpt":"What is GraphQL? GraphQL is an open-source data query and manipulation language for APIs that allows you to describe the API data as well as what data you wish…","html":"<h3 id=\"what-is-graphql\" style=\"position:relative;\"><a href=\"#what-is-graphql\" aria-label=\"what is graphql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is GraphQL?</h3>\n<p>GraphQL is an open-source data query and manipulation language for APIs that allows you to describe the API data as well as what data you wish to obtain, by asking exactly what you want to obtain. This is done by a server runtime that runs your queries. GraphQL is an alternative to  REST.</p>\n<p>As an example, let’s consider a simplified version of the twitter API. This information is defined in the server side, by showing what the server provides.</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">createdAt</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">followers</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">User</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">following</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">User</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">tweets</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Tweet</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Tweet</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">content</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">createdAt</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">user</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is the syntax to define the data types GraphQL can handle.</p>\n<p>The User type has the id field which works as a unique identifier, the name, a createdAt, email and an array of users that represents the followers, another array that represents the users that we are following and the user’s tweets.</p>\n<p>The fields whose data types contain a ! means that that field is non-nullable. In the collection, placing the ! outside the array means that the collection is non-nullable, while the ! inside means that all the items inside the collection will always be of type User and not null.</p>\n<p>The Tweet type also contains a unique identifier, contains the content, at what time was it created and who created it.</p>\n<p>With this, we can define the queries like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token attr-name\">me</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span>\n\t<span class=\"token attr-name\">users</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">User</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">tweets</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Tweet</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We just defined 3 queries:</p>\n<ul>\n<li>a <strong>me</strong> query which allows you to query the current user’s information.</li>\n<li>a <strong>users</strong> query which allows you to to query all the users in the platform.</li>\n<li>a <strong>tweets</strong> query which allows you to query all the tweets in the platform.</li>\n</ul>\n<p>So, for instance if we want to query my information, we do the following query from the client side:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token object\">me</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token property\">name</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">email</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The response for this will be something like this JSON result:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"me\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"André Rodrigues\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"andre.rodrigues@miniclip.com\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Notice how in the query we didn’t specify all the fields of the user type. This means that we can query only the data we need and nothing else.</p>\n<p>Another example, obtaining the current user’s tweets:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token object\">me</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token property\">name</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">email</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token object\">tweets</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">content</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The JSON response should be something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"me\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"André Rodrigues\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"andre.rodrigues@miniclip.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tweets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"I've been using GraphQL and it's really awesome!\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello everyone!\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>When we fetch a more complex field like “me” or “tweets” we need to specify which fields from that we wish and we will also obtain them.</p>\n<p>Queries can also have arguments if they are defined. for example if we change the tweets query to accept a userId parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token attr-name\">me</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">User</span>\n\t<span class=\"token attr-name\">users</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">User</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n\t<span class=\"token attr-name\">tweets</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">userId</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Tweet</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We can query like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property-query\">tweets</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">userId</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"42\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token property\">content</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And the response:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"tweets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Good night everybody\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"I'm shook!\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>This id was used to filter the tweets by user id. If we wanted the data in another format by fetching a user and then its tweets, we could have defined a user query with an id parameter and query the user and its tweets.</p>\n<p>There are some standards and best practices in GraphQL to handle these cases on fetching data, as well as how to paginate data, which will be talked about in the future.</p>\n<h3 id=\"advantages\" style=\"position:relative;\"><a href=\"#advantages\" aria-label=\"advantages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advantages</h3>\n<p>The main advantage of using GraphQL instead of REST is that we can query all the data we want and how we want it according to the schema. when using REST it’s unavoidable to fetch data that will probably not be used. With graphQL you can specify in the query exactly how you want it.</p>\n<p>If for instance we want to fetch all the tweets of the current user’s followers we could do the following query:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token object\">me</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token object\">followers</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">id</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">name</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token object\">tweets</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token property\">content</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We would obtain the following data:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"me\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"followers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"64\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Testy McTestface\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"tweets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Today we are testing!\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span> \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"42\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Lenny Leonard\"</span>\n            <span class=\"token property\">\"tweets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Good night everybody\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"I'm shook!\"</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Another thing that might be considered an advantage is that to fetch related data, we might need to perform multiple API requests, but with GraphQL we can fetch all the related data we need in one request, which can improve performance.</p>\n<h3 id=\"disadvantages\" style=\"position:relative;\"><a href=\"#disadvantages\" aria-label=\"disadvantages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantages</h3>\n<p>Usually GraphQL clients are fairly more complex compared to REST clients, which requires some extra code, especially to handle and synchronize local state with the server. This will be discussed soon.</p>\n<p>When doing deeply nested queries, we need to be careful on how nested we go, otherwise this can cause performance issues on the server. For instance the following query…</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token object\">me</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token object\">followers</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token object\">followers</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token object\">followers</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token operator\">...</span>\t\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here we could try and fetch our user’s followers’s follower’s followers’s… and so on.\nThis will deeply impact performance and it’s best to configure the server to only allow an up to value in nesting. And create a different query to fetch the necessary data accordingly. This value should be defined depending on the data and the queries.</p>\n<p>Regarding error handling, in REST, HTTP response codes describe the errors that have ocurred. Possibly with an error message with more specific information. When using GraphQL we usually get a 200, but the response JSON will have an errors field with more information.</p>\n<p>GraphQL is best for complex data with lots of relations since it treats your data as a graph. This means that for a fairly simple data model, GraphQL might not be the best solution due to the added complexity.</p>","fields":{"slug":"/an-introduction-to-graphql-part-1/","readingTime":{"text":"6 min read"}},"frontmatter":{"title":"Introduction to GraphQL - Part 1","date":"May 31, 2022","description":"This is the first post talking about GraphQL and how to use it. It presents what it is, a bit on how it works, and advantages and disadvantages."}},"previous":{"fields":{"slug":"/the-power-of-static-typing/"},"frontmatter":{"title":"The power of static typing"}},"next":{"fields":{"slug":"/an-introduction-to-graphql-part-2/"},"frontmatter":{"title":"Introduction to GraphQL - Part 2"}}},"pageContext":{"id":"08714305-11be-5d9f-a15b-53db3a55bdd2","previousPostId":"44ed1db5-5065-5962-a319-de96e1576619","nextPostId":"bc6b620d-3445-51a9-82a0-255c303a583f"}},
    "staticQueryHashes": ["2841359383","3257411868"]}